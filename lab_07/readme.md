# Синтаксис

### 1. Основные элементы

#### 1.1. Инструкции

Инструкции представляют собой команды, которые процессор выполняет. Примеры инструкций: `mov`, `add`, `sub`, `mul`, `div`, `cmp`, `jmp`.

#### 1.2. Операнды

Операнды — это данные, над которыми выполняются инструкции. Они могут быть регистрами, константами, или адресами памяти.

#### 1.3. Регистры

64-битные регистры включают:
- Общие: `rax`, `rbx`, `rcx`, `rdx`, `rsi`, `rdi`, `rbp`, `rsp`
- Дополнительные: `r8`, `r9`, ..., `r15`
- Специальные: `rip` (инструкционный указатель)

#### 1.4. Сегменты

Программы обычно разбиты на несколько сегментов:
- `.text`: Содержит исполняемый код
- `.data`: Содержит инициализированные данные
- `.bss`: Содержит неинициализированные данные

### 2. Пример программы

Рассмотрим простую программу на ассемблере, которая складывает два числа и выводит результат.

#### 2.1. Код

Создайте файл с расширением `.asm`, например `main.asm`:

```asm
section .data
    num1 dq 5
    num2 dq 3
    result dq 0

section .text
    global _start

_start:
    ; Загрузка чисел в регистры
    mov rax, [num1]
    mov rbx, [num2]

    ; Выполнение сложения
    add rax, rbx

    ; Сохранение результата
    mov [result], rax

    ; Завершение программы
    mov rax, 60        ; Системный вызов для выхода
    xor rdi, rdi       ; Код возврата 0
    syscall
```

#### 2.2. Компиляция и сборка

Для компиляции и сборки ассемблерного кода используйте `nasm` и `ld`. Выполните следующие команды в терминале:

1. Компиляция ассемблерного кода в объектный файл:

    ```sh
    nasm -f elf64 -o main.o main.asm
    ```

2. Сборка объектного файла в исполняемый файл:

    ```sh
    ld -o main main.o
    ```

#### 2.3. Запуск

Запустите исполняемый файл:

```sh
./main
```

### 3. Разбор примера

#### 3.1. Секции

- `section .data`: Содержит данные программы. Здесь определены `num1`, `num2` и `result`.
- `section .text`: Содержит код программы. Здесь определено начало программы `_start`.

#### 3.2. Инструкции

- `mov rax, [num1]`: Загружает значение `num1` в регистр `rax`.
- `add rax, rbx`: Складывает значение регистра `rbx` с `rax`.
- `mov [result], rax`: Сохраняет результат сложения в `result`.
- `mov rax, 60`: Подготавливает системный вызов для завершения программы.
- `xor rdi, rdi`: Устанавливает код возврата 0.
- `syscall`: Выполняет системный вызов.

### 4. Дополнительные советы

- **Используйте комментарии** (`;`) для пояснения кода.
- **Организуйте код** по секциям для ясности и порядка.
- **Следите за синтаксисом** и регистровыми соглашениями для 64-битных систем.

Следуя этим рекомендациям, вы сможете создавать и понимать ассемблерные программы для 64-битных систем.
